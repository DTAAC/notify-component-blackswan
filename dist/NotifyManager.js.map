{"version":3,"file":"NotifyManager.js","names":["React","Notify","NotifyManager","container","id","Math","random","toString","substr","add","title","text","type","time","onClick","onClose","children","state","notify","createElement","setState","setTimeout","delete","once","jobTypeId","infoOnce","errorOnce","info","warning","error","cloneElement","needRemove","removeItem","update","percent","forceUpdate","bind"],"sources":["../src/NotifyManager.jsx"],"sourcesContent":["import React from 'react'\r\nimport Notify from \"./Notify\";\r\n\r\nexport default class NotifyManager\r\n{\r\n  static container = null;\r\n\r\n\r\n  static id()\r\n  {\r\n    return '_' + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  static add(title, text, type, time, onClick, onClose)\r\n  {\r\n    if(!NotifyManager.container)\r\n    {\r\n      return\r\n    }\r\n\r\n    let children = NotifyManager.container.state.children;\r\n    let id = NotifyManager.id();\r\n    let notify = <Notify\r\n      title={title}\r\n      text={text}\r\n      type={type}\r\n      time={time}\r\n      id={id}\r\n      onClick={() => {\r\n        if(typeof onClick === 'function'){\r\n          onClick()\r\n        }\r\n      }}\r\n      onClose={() => {\r\n        if(typeof onClose === 'function'){\r\n          onClose()\r\n        }\r\n      }}\r\n    />\r\n\r\n    children[id] = notify;\r\n    NotifyManager.container.setState({\r\n      children: children\r\n    });\r\n\r\n    setTimeout(() => {\r\n      NotifyManager.delete(id);\r\n    }, time)\r\n\r\n    return id;\r\n  }\r\n\r\n\r\n\r\n  static once(jobTypeId, title, text, type, time, onClick, onClose)\r\n  {\r\n    if(!NotifyManager.container)\r\n    {\r\n      return\r\n    }\r\n\r\n    let children = NotifyManager.container.state.children;\r\n    if(typeof children[jobTypeId] === 'undefined')\r\n    {\r\n      let notify = <Notify\r\n        title={title}\r\n        text={text}\r\n        type={type}\r\n        time={time}\r\n        id={jobTypeId}\r\n        onClick={() => {\r\n          if(typeof onClick === 'function'){\r\n            onClick()\r\n          }\r\n        }}\r\n        onClose={() => {\r\n          if(typeof onClose === 'function'){\r\n            onClose()\r\n          }\r\n        }}\r\n      />\r\n\r\n      children[jobTypeId] = notify;\r\n      NotifyManager.container.setState({\r\n        children: children\r\n      });\r\n\r\n      setTimeout(() => {\r\n        NotifyManager.delete(jobTypeId);\r\n      }, time)\r\n\r\n      return jobTypeId;\r\n    }\r\n  }\r\n\r\n  static infoOnce(id, title, text, time = 4000, onClick, onClose)\r\n  {\r\n    return NotifyManager.once(id, title, text, 'info', time, onClick, onClose);\r\n  }\r\n\r\n  static errorOnce(id, title, text, time = 4000, onClick, onClose)\r\n  {\r\n    return NotifyManager.once(id, title, text, 'error', time, onClick, onClose);\r\n  }\r\n\r\n  static info(title, text, time = 4000, onClick, onClose)\r\n  {\r\n    return NotifyManager.add(title, text, 'info', time, onClick, onClose);\r\n  }\r\n\r\n  static warning(title, text, time = 4000, onClick, onClose)\r\n  {\r\n    return NotifyManager.add(title, text, 'warning', time, onClick, onClose);\r\n  }\r\n\r\n  static error(title, text, time = 4000, onClick, onClose)\r\n  {\r\n    return NotifyManager.add(title, text, 'error', time, onClick, onClose);\r\n  }\r\n\r\n  static delete(jobTypeId)\r\n  {\r\n    if(!NotifyManager.container)\r\n    {\r\n      return\r\n    }\r\n\r\n    let children = NotifyManager.container.state.children;\r\n    if(typeof children[jobTypeId] !== 'undefined'){\r\n      children[jobTypeId] = React.cloneElement(children[jobTypeId], { needRemove: true })\r\n\r\n      NotifyManager.container.removeItem(jobTypeId)\r\n    }\r\n  }\r\n\r\n  static update(jobTypeId, percent)\r\n  {\r\n    if(!NotifyManager.container)\r\n    {\r\n      return\r\n    }\r\n\r\n    let children = NotifyManager.container.state.children;\r\n    if(typeof children[jobTypeId] !== 'undefined')\r\n    {\r\n      children[jobTypeId] = React.cloneElement(children[jobTypeId], { percent: percent })\r\n      NotifyManager.container.forceUpdate();\r\n    }\r\n  }\r\n\r\n  static bind(container)\r\n  {\r\n    this.container = container;\r\n  }\r\n}"],"mappings":"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"}