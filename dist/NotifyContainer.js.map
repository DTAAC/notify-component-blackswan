{"version":3,"file":"NotifyContainer.js","names":["React","Component","Fragment","NotifyManager","Portal","NotifyContainer","constructor","props","state","children","needToRemove","bind","updateItem","key","percent","setState","prv","removeItem","push","setTimeout","index","indexOf","render","notifies","Object","values","length","createElement","id","map","item"],"sources":["../src/NotifyContainer.jsx"],"sourcesContent":["import React, {Component, Fragment} from 'react'\r\nimport NotifyManager from './NotifyManager'\r\nimport Portal from \"./Portal\";\r\n\r\nexport default class NotifyContainer extends Component\r\n{\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n\r\n    this.state = {\r\n      children: {},\r\n      needToRemove: []\r\n    };\r\n\r\n    NotifyManager.bind(this);\r\n  }\r\n\r\n  updateItem(key, percent)\r\n  {\r\n    this.setState((prv) =>\r\n    {\r\n      if(typeof this.state.children[key] !== 'undefined')\r\n      {\r\n        this.state.children[key].percent = percent;\r\n      }\r\n\r\n      return prv;\r\n    });\r\n  }\r\n\r\n  removeItem(key)\r\n  {\r\n    this.setState((prv) => {\r\n      prv.needToRemove.push(key);\r\n\r\n      return prv;\r\n    }, () => {\r\n      setTimeout(() => {\r\n        this.setState((prv) => {\r\n          if(typeof this.state.children[key] !== 'undefined')\r\n          {\r\n            delete this.state.children[key];\r\n\r\n            let index = this.state.needToRemove.indexOf(key);\r\n            if(index !== -1)\r\n            {\r\n              delete prv.needToRemove[index];\r\n            }\r\n          }\r\n\r\n          return prv;\r\n        });\r\n      }, 300)\r\n    })\r\n  }\r\n\r\n  render()\r\n  {\r\n    let notifies = Object.values(this.state.children);\r\n\r\n    return notifies.length > 0 && <Portal id={'notify'}>\r\n         {notifies.map((item) => {\r\n           if(item?.props?.id)\r\n           {\r\n             return <Fragment key={item.props.id}>{item}</Fragment>;\r\n           }\r\n         })}\r\n    </Portal>\r\n  }\r\n}"],"mappings":"AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,MAAM,MAAM,UAAU;AAE7B,eAAe,MAAMC,eAAe,SAASJ,SAAS,CACtD;EACEK,WAAWA,CAACC,KAAK,EACjB;IACE,KAAK,CAACA,KAAK,CAAC;IAEZ,IAAI,CAACC,KAAK,GAAG;MACXC,QAAQ,EAAE,CAAC,CAAC;MACZC,YAAY,EAAE;IAChB,CAAC;IAEDP,aAAa,CAACQ,IAAI,CAAC,IAAI,CAAC;EAC1B;EAEAC,UAAUA,CAACC,GAAG,EAAEC,OAAO,EACvB;IACE,IAAI,CAACC,QAAQ,CAAEC,GAAG,IAClB;MACE,IAAG,OAAO,IAAI,CAACR,KAAK,CAACC,QAAQ,CAACI,GAAG,CAAC,KAAK,WAAW,EAClD;QACE,IAAI,CAACL,KAAK,CAACC,QAAQ,CAACI,GAAG,CAAC,CAACC,OAAO,GAAGA,OAAO;MAC5C;MAEA,OAAOE,GAAG;IACZ,CAAC,CAAC;EACJ;EAEAC,UAAUA,CAACJ,GAAG,EACd;IACE,IAAI,CAACE,QAAQ,CAAEC,GAAG,IAAK;MACrBA,GAAG,CAACN,YAAY,CAACQ,IAAI,CAACL,GAAG,CAAC;MAE1B,OAAOG,GAAG;IACZ,CAAC,EAAE,MAAM;MACPG,UAAU,CAAC,MAAM;QACf,IAAI,CAACJ,QAAQ,CAAEC,GAAG,IAAK;UACrB,IAAG,OAAO,IAAI,CAACR,KAAK,CAACC,QAAQ,CAACI,GAAG,CAAC,KAAK,WAAW,EAClD;YACE,OAAO,IAAI,CAACL,KAAK,CAACC,QAAQ,CAACI,GAAG,CAAC;YAE/B,IAAIO,KAAK,GAAG,IAAI,CAACZ,KAAK,CAACE,YAAY,CAACW,OAAO,CAACR,GAAG,CAAC;YAChD,IAAGO,KAAK,KAAK,CAAC,CAAC,EACf;cACE,OAAOJ,GAAG,CAACN,YAAY,CAACU,KAAK,CAAC;YAChC;UACF;UAEA,OAAOJ,GAAG;QACZ,CAAC,CAAC;MACJ,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC;EACJ;EAEAM,MAAMA,CAAA,EACN;IACE,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACjB,KAAK,CAACC,QAAQ,CAAC;IAEjD,OAAOc,QAAQ,CAACG,MAAM,GAAG,CAAC,iBAAI1B,KAAA,CAAA2B,aAAA,CAACvB,MAAM;MAACwB,EAAE,EAAE;IAAS,GAC7CL,QAAQ,CAACM,GAAG,CAAEC,IAAI,IAAK;MACtB,IAAGA,IAAI,EAAEvB,KAAK,EAAEqB,EAAE,EAClB;QACE,oBAAO5B,KAAA,CAAA2B,aAAA,CAACzB,QAAQ;UAACW,GAAG,EAAEiB,IAAI,CAACvB,KAAK,CAACqB;QAAG,GAAEE,IAAe,CAAC;MACxD;IACF,CAAC,CACE,CAAC;EACX;AACF"}